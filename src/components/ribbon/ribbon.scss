ribbon {
  .protector {
    position: relative;
    z-index: 1;

    .ribbon {
      font-size: 16px;
      width: 10em;
      height: 3.6em;
      position: relative;

      text-align: center;
      padding: 1em 2em;
      margin: 2em auto 3em;

      &:before, &:after {
        content: "";
        position: absolute;
        display: block;
        bottom: -1em;
        border-width: 1.5em;
        border-style: solid;
        z-index: -1;
      }

      &:before {
        left: -2em;
        border-right-width: 1.5em;
        border-left-color: transparent;
      }

      &:after {
        right: -2em;
        border-left-width: 1.5em;
        border-right-color: transparent;
      }

      .circle {
        border-radius: 50%;
        width: 4.5em;
        height: 4.5em;
        box-shadow: 0 2px 5px 0 rgba(0,0,0,0.3);
        color: white;
        margin: -1.5em auto 0 auto;

        .text {
          font-size: 20px;
          vertical-align: middle;
          font-family: Impact;
          line-height: 350%;
        }

        &:before, &:after {
          content: "";
          position: absolute;
          display: block;
          border-style: solid;
          // border-color: #804f7c transparent transparent transparent;
          bottom: -1em;
        }
        &:before {
          left: 0;
          border-width: 1em 0 0 1em;
        }
        &:after {
          right: 0;
          border-width: 1em 1em 0 0;
        }
      }
    }
  }

  // colors ordered from lightest to darkest
  $states: (
    none: (
      circle: #ff751a,
      ribbon: #ff6600,
      ribbonTails: #e65c00,
      circleTails: #a5480b
    ),
    owe: (
      circle: #1ac6ff,
      ribbon: #00bfff,
      ribbonTails: #00ace6,
      circleTails: #0c627f
    ),
    fail: (
      circle: #e3301c,
      ribbon: #cc2b19,
      ribbonTails: #b62616,
      circleTails: #72180d
    ),
    bad: (
      circle: #a05fb9,
      ribbon: #954eb1,
      ribbonTails: #8646a0,
      circleTails: #4f2d5b
    ),
    good: (
      circle: #2981bc,
      ribbon: #2573a7,
      ribbonTails: #206592,
      circleTails: #144260
    ),
    best: (
      circle: #2ecc71,
      ribbon: #2abb67,
      ribbonTails: #27ae60,
      circleTails: #17753f
    )
  );

  @each $key, $value in $states {
    .#{$key}-ribbon {
      background-color: map-get($value, ribbon);

      &:before, &:after {
        border-color: map-get($value, ribbonTails);
      }

      .#{$key}-circle {
        background-color: map-get($value, circle);

        &:before, &:after {
          border-color: map-get($value, circleTails) transparent;
        }
      }
    }
  }
}
