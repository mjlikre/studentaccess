webpackJsonp([9],{153:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=153},177:function(e,t,n){function a(e){var t=o[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var o={"../pages/cafeteria/cafeteria.module.ngfactory":[254,0],"../pages/events/events.module.ngfactory":[255,6],"../pages/grades-detail/grades-detail.module.ngfactory":[256,3],"../pages/grades/grades.module.ngfactory":[257,1],"../pages/homework/homework.module.ngfactory":[258,2],"../pages/login/login.module.ngfactory":[259,7],"../pages/profile/profile.module.ngfactory":[260,4],"../pages/records/records.module.ngfactory":[261,8],"../pages/staff/staff.module.ngfactory":[262,5]};a.keys=function(){return Object.keys(o)},a.id=177,e.exports=a},211:function(e,t,n){"use strict";function a(e){return new d.a(e,"./assets/i18n/",".json")}function o(e){return i._26(0,[(e()(),i._3(0,0,null,null,11,"button",[["class","item item-block"],["ion-item",""],["menuClose",""]],[[2,"light-gray",null],[2,"gray",null]],[[null,"click"]],function(e,t,n){var a=!0,o=e.component;if("click"===t){a=!1!==i._17(e,6).close()&&a}if("click"===t){a=!1!==o.openPage(e.context.$implicit.component)&&a}return a},D.b,D.a)),i._2(1,1097728,null,3,C.a,[R.a,T.a,i.k,i.D,[2,H.a]],null,null),i._22(335544320,10,{contentLabel:0}),i._22(603979776,11,{_buttons:1}),i._22(603979776,12,{_icons:1}),i._2(5,16384,null,0,P.a,[],null,null),i._2(6,16384,null,0,U.a,[F.a],{menuClose:[0,"menuClose"]},null),(e()(),i._24(-1,2,["\n        "])),(e()(),i._3(8,0,null,2,1,"ion-icon",[["class","menu-icon"],["color","dark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i._2(9,147456,[[12,4]],0,L.a,[T.a,i.k,i.D],{color:[0,"color"],name:[1,"name"]},null),(e()(),i._24(10,2,["\n        ","\n      "])),i._18(131072,c.j,[c.k,i.g])],function(e,t){e(t,6,0,"");e(t,9,0,"dark",t.context.$implicit.icon)},function(e,t){var n=t.component;e(t,0,0,t.context.$implicit.component!==n.activePage,t.context.$implicit.component===n.activePage);e(t,8,0,i._17(t,9)._hidden);e(t,10,0,i._25(t,10,0,i._17(t,11).transform(t.context.$implicit.title)))})}function l(e){return i._26(0,[i._22(402653184,1,{nav:0}),(e()(),i._3(1,0,null,null,45,"ion-menu",[["role","navigation"]],null,null,null,x.b,x.a)),i._21(6144,null,q.a,null,[G.a]),i._2(3,245760,null,2,G.a,[F.a,i.k,T.a,j.a,i.D,I.a,K.l,W.a,Y.a],{content:[0,"content"]},null),i._22(335544320,2,{menuContent:0}),i._22(335544320,3,{menuNav:0}),(e()(),i._24(-1,0,["\n  "])),(e()(),i._3(7,0,null,0,38,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,B.b,B.a)),i._2(8,4374528,[[2,4]],0,$.a,[T.a,j.a,W.a,i.k,i.D,Y.a,I.a,i.x,[2,X.a],[2,J.a]],null,null),(e()(),i._24(-1,1,["\n    "])),(e()(),i._3(10,0,null,1,34,"ion-list",[["no-lines",""]],null,null,null,null,null)),i._2(11,16384,null,0,V.a,[T.a,i.k,i.D,j.a,K.l,W.a],null,null),(e()(),i._24(-1,null,["\n      "])),(e()(),i._3(13,0,null,null,6,"ion-item",[["class","item item-block"],["color","secondary"]],null,null,null,D.b,D.a)),i._2(14,1097728,null,3,C.a,[R.a,T.a,i.k,i.D,[2,H.a]],{color:[0,"color"]},null),i._22(335544320,4,{contentLabel:0}),i._22(603979776,5,{_buttons:1}),i._22(603979776,6,{_icons:1}),i._2(18,16384,null,0,P.a,[],null,null),(e()(),i._24(19,2,["",""])),(e()(),i._24(-1,null,["\n      "])),(e()(),i._3(21,0,null,null,6,"ion-item",[["class","item item-block"],["color","primary"]],null,null,null,D.b,D.a)),i._2(22,1097728,null,3,C.a,[R.a,T.a,i.k,i.D,[2,H.a]],{color:[0,"color"]},null),i._22(335544320,7,{contentLabel:0}),i._22(603979776,8,{_buttons:1}),i._22(603979776,9,{_icons:1}),i._2(26,16384,null,0,P.a,[],null,null),(e()(),i._24(27,2,["","@nca.edu.ni"])),(e()(),i._24(-1,null,["\n      "])),(e()(),i.Y(16777216,null,null,1,null,o)),i._2(30,802816,null,0,z.i,[i.M,i.J,i.s],{ngForOf:[0,"ngForOf"]},null),(e()(),i._24(-1,null,["\n      "])),(e()(),i._3(32,0,null,null,11,"button",[["class","light-gray item item-block"],["ion-item",""],["menuClose",""]],null,[[null,"click"]],function(e,t,n){var a=!0,o=e.component;if("click"===t){a=!1!==i._17(e,38).close()&&a}if("click"===t){a=!1!==o.logout()&&a}return a},D.b,D.a)),i._2(33,1097728,null,3,C.a,[R.a,T.a,i.k,i.D,[2,H.a]],null,null),i._22(335544320,13,{contentLabel:0}),i._22(603979776,14,{_buttons:1}),i._22(603979776,15,{_icons:1}),i._2(37,16384,null,0,P.a,[],null,null),i._2(38,16384,null,0,U.a,[F.a],{menuClose:[0,"menuClose"]},null),(e()(),i._24(-1,2,["\n        "])),(e()(),i._3(40,0,null,2,1,"ion-icon",[["class","menu-icon"],["color","dark"],["name","log-out"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i._2(41,147456,[[15,4]],0,L.a,[T.a,i.k,i.D],{color:[0,"color"],name:[1,"name"]},null),(e()(),i._24(42,2,["\n        ","\n      "])),i._18(131072,c.j,[c.k,i.g]),(e()(),i._24(-1,null,["\n    "])),(e()(),i._24(-1,1,["\n  "])),(e()(),i._24(-1,0,["\n\n"])),(e()(),i._24(-1,null,["\n\n"])),(e()(),i._24(-1,null,["\n"])),(e()(),i._3(49,0,null,null,2,"ion-nav",[["swipeBackEnabled","false"]],null,null,null,Q.b,Q.a)),i._21(6144,null,q.a,null,[Z.a]),i._2(51,4374528,[[1,4],["content",4]],0,Z.a,[[2,X.a],[2,J.a],Y.a,T.a,j.a,i.k,i.x,i.D,i.i,K.l,ee.a,[2,te.a],W.a,i.l],{swipeBackEnabled:[0,"swipeBackEnabled"],root:[1,"root"]},null),(e()(),i._24(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,i._17(t,51));e(t,14,0,"secondary");e(t,22,0,"primary");e(t,30,0,n.pages);e(t,38,0,"");e(t,41,0,"dark","log-out");e(t,51,0,"false",n.rootPage)},function(e,t){var n=t.component;e(t,7,0,i._17(t,8).statusbarPadding,i._17(t,8)._hasRefresher);e(t,19,0,n.name);e(t,27,0,n.username);e(t,40,0,i._17(t,41)._hidden);e(t,42,0,i._25(t,42,0,i._17(t,43).transform("GLOBAL.LOGOUT")))})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(28),i=n(0),u=(n(3),n(154)),s=(n(120),n(77)),c=n(54),d=n(250),g=n(52),h=n(60),f=n(45),_=n(34),p=function(){function e(e,t,n,a,o,l,r){var i=this;this.loadingCtrl=e,this.events=t,this.storage=n,this.auth=a,this.state=o,this.log=l,this.translate=r,this.rootPage="Profile",this.username="",this.name="",this.loading=this.loadingCtrl.create({dismissOnPageChange:!0}),this.loading.present(),r.getTranslation("en"),r.getTranslation("es"),r.getTranslation("ko");var u=navigator.language.slice(0,2);"en"!==u&&"es"!==u&&(u="en"),r.setDefaultLang(u),this.events.subscribe("login",function(e,t,n){return i.login(e,t,n)}),this.storage.ready().then(function(){return i.state.load()}).then(function(e){i.loading.dismiss();e&&e.USER&&e.LOGIN?i.login(e.USER.data,e.LOGIN.data):i.logout()}).catch(this.log.warn),this.pages=[{title:"PROFILE.NAME",component:"Profile",icon:"person"},{title:"HOMEWORK.NAME",component:"Homework",icon:"bookmarks"},{title:"GRADES.NAME",component:"Grades",icon:"checkmark-circle"},{title:"EVENTS.NAME",component:"Events",icon:"calendar"},{title:"CAFETERIA.NAME",component:"Cafeteria",icon:"card"},{title:"STAFF.NAME",component:"Staff",icon:"people"}]}return e.prototype.login=function(e,t,n){if(this.username=e.username,this.name=t.person_name,this.translate.use(e.language),n)this.openPage(n);else{var a=location.hash.slice(2);this.activePage=a.charAt(0).toUpperCase()+a.slice(1)}},e.prototype.openPage=function(e){this.activePage=e,this.nav.setRoot(e),this.log.debug("openPage: ",e,"active Page: ",(this.nav.getActive()||{}).name)},e.prototype.logout=function(){var e=this;this.loading=this.loadingCtrl.create(),this.loading.present().then(function(){return e.nav.setRoot("Login")}).then(function(){return e.auth.logout()}).then(function(){return e.loading.dismiss()}).catch(this.log.warn)},e}(),m=n(82),y=function(){return function(){}}(),v=n(47),b=n(200),k=n(201),w=n(202),E=n(203),S=n(204),N=n(205),M=n(206),A=n(207),O=n(208),D=n(125),C=n(15),R=n(13),T=n(1),H=n(37),P=n(56),U=n(99),F=n(23),L=n(36),x=n(252),q=n(33),G=n(75),j=n(4),I=n(25),K=n(6),W=n(9),Y=n(8),B=n(209),$=n(22),X=n(5),J=n(21),V=n(43),z=n(12),Q=n(253),Z=n(51),ee=n(31),te=n(14),ne=n(57),ae=n(61),oe=n(101),le=i._1({encapsulation:2,styles:[],data:{}}),re=i.Z("ng-component",p,function(e){return i._26(0,[(e()(),i._3(0,0,null,null,1,"ng-component",[],null,null,null,l,le)),i._2(1,49152,null,0,p,[ne.a,ae.a,oe.a,h.a,f.a,_.a,c.k],null,null)],null,null)},{},{},[]),ie=n(102),ue=n(155),se=n(84),ce=n(18),de=n(92),ge=n(85),he=n(27),fe=n(127),_e=n(49),pe=n(38),me=n(106),ye=n(71),ve=n(109),be=n(104),ke=n(116),we=n(199),Ee=n(103),Se=n(100),Ne=n(105),Me=i._0(y,[v.b],function(e){return i._14([i._15(512,i.i,i.W,[[8,[b.a,k.a,w.a,E.a,S.a,N.a,M.a,A.a,O.a,re]],[3,i.i],i.v]),i._15(5120,i.u,i._13,[[3,i.u]]),i._15(4608,z.l,z.k,[i.u,[2,z.t]]),i._15(5120,i.b,i._4,[]),i._15(5120,i.s,i._10,[]),i._15(5120,i.t,i._11,[]),i._15(4608,r.c,r.q,[z.d]),i._15(6144,i.H,null,[r.c]),i._15(4608,r.f,ie.a,[]),i._15(5120,r.d,function(e,t,n,a,o){return[new r.k(e,t),new r.o(n),new r.n(a,o)]},[z.d,i.x,z.d,z.d,r.f]),i._15(4608,r.e,r.e,[r.d,i.x]),i._15(135680,r.m,r.m,[z.d]),i._15(4608,r.l,r.l,[r.e,r.m]),i._15(4608,ue.a,ue.d,[]),i._15(5120,ue.c,u.d,[]),i._15(4608,ue.b,u.c,[ue.a,ue.c]),i._15(5120,i.F,u.e,[r.l,ue.b,i.x]),i._15(6144,r.p,null,[r.m]),i._15(4608,i.K,i.K,[i.x]),i._15(4608,r.h,r.h,[z.d]),i._15(4608,r.i,r.i,[z.d]),i._15(4608,se.b,u.b,[i.F,r.b]),i._15(4608,ce.q,ce.q,[]),i._15(4608,ce.d,ce.d,[]),i._15(4608,s.h,s.m,[z.d,i.z,s.k]),i._15(4608,s.n,s.n,[s.h,s.l]),i._15(5120,s.a,function(e){return[e]},[s.n]),i._15(4608,s.j,s.j,[]),i._15(6144,s.i,null,[s.j]),i._15(4608,s.g,s.g,[s.i]),i._15(6144,s.b,null,[s.g]),i._15(5120,s.f,s.o,[s.b,[2,s.a]]),i._15(4608,s.c,s.c,[s.f]),i._15(4608,de.a,de.a,[Y.a,T.a]),i._15(4608,ge.a,ge.a,[Y.a,T.a]),i._15(4608,ae.a,ae.a,[]),i._15(4608,R.a,R.a,[]),i._15(4608,he.a,he.a,[j.a]),i._15(4608,I.a,I.a,[T.a,j.a,i.x,W.a]),i._15(4608,ne.a,ne.a,[Y.a,T.a]),i._15(5120,z.g,fe.c,[z.r,[2,z.a],T.a]),i._15(4608,z.f,z.f,[z.g]),i._15(5120,_e.b,_e.d,[Y.a,_e.a]),i._15(5120,te.a,te.b,[Y.a,_e.b,z.f,pe.b,i.i]),i._15(4608,me.a,me.a,[Y.a,T.a,te.a]),i._15(4608,ye.a,ye.a,[Y.a,T.a]),i._15(4608,ve.a,ve.a,[Y.a,T.a,te.a]),i._15(4608,be.a,be.a,[T.a,j.a,W.a,Y.a,K.l]),i._15(4608,ke.a,ke.a,[Y.a,T.a]),i._15(4608,ee.a,ee.a,[j.a,T.a]),i._15(5120,oe.a,oe.c,[oe.b]),i._15(5120,c.g,a,[s.c]),i._15(4608,c.c,c.e,[]),i._15(4608,c.i,c.d,[]),i._15(4608,c.b,c.a,[]),i._15(4608,c.n,c.n,[]),i._15(4608,c.k,c.k,[c.n,c.g,c.c,c.i,c.b,c.l,c.m]),i._15(4608,_.a,_.a,[]),i._15(4608,f.a,f.a,[oe.a,_.a]),i._15(4608,m.a,m.a,[s.c,oe.a,f.a,_.a]),i._15(4608,h.a,h.a,[s.c,m.a,_.a]),i._15(512,z.b,z.b,[]),i._15(512,i.l,we.a,[]),i._15(256,T.b,{},[]),i._15(1024,Ee.a,Ee.b,[]),i._15(1024,j.a,j.b,[r.b,Ee.a,i.x]),i._15(1024,T.a,T.c,[T.b,j.a]),i._15(512,W.a,W.a,[j.a]),i._15(512,F.a,F.a,[]),i._15(512,Y.a,Y.a,[T.a,j.a,[2,F.a]]),i._15(512,K.l,K.l,[Y.a]),i._15(256,_e.a,{links:[{loadChildren:"../pages/cafeteria/cafeteria.module.ngfactory#CafeteriaModuleNgFactory",name:"Cafeteria",segment:"cafeteria",priority:"low",defaultHistory:[]},{loadChildren:"../pages/events/events.module.ngfactory#EventsModuleNgFactory",name:"Events",segment:"events",priority:"low",defaultHistory:[]},{loadChildren:"../pages/grades-detail/grades-detail.module.ngfactory#GradesDetailModuleNgFactory",name:"GradesDetail",segment:"grades/",priority:"low",defaultHistory:["Grades"]},{loadChildren:"../pages/grades/grades.module.ngfactory#GradesModuleNgFactory",name:"Grades",segment:"grades",priority:"low",defaultHistory:[]},{loadChildren:"../pages/homework/homework.module.ngfactory#HomeworkModuleNgFactory",name:"Homework",segment:"homework",priority:"low",defaultHistory:[]},{loadChildren:"../pages/login/login.module.ngfactory#LoginModuleNgFactory",name:"Login",segment:"login",priority:"low",defaultHistory:[]},{loadChildren:"../pages/profile/profile.module.ngfactory#ProfileModuleNgFactory",name:"Profile",segment:"profile",priority:"low",defaultHistory:[]},{loadChildren:"../pages/records/records.module.ngfactory#RecordsModuleNgFactory",name:"Records",segment:"profile/",priority:"low",defaultHistory:["Profile"]},{loadChildren:"../pages/staff/staff.module.ngfactory#StaffModuleNgFactory",name:"Staff",segment:"staff",priority:"low",defaultHistory:[]}]},[]),i._15(512,i.h,i.h,[]),i._15(512,Se.a,Se.a,[i.h]),i._15(1024,pe.b,pe.c,[Se.a,i.q]),i._15(1024,i.c,function(e,t,n,a,o,l,i,u,s,c,d,g,h){return[r.s(e),Ne.a(t),ae.b(n,a),be.b(o,l,i,u,s),pe.d(c,d,g,h)]},[[2,i.w],T.a,j.a,W.a,T.a,j.a,W.a,Y.a,K.l,T.a,_e.a,pe.b,i.x]),i._15(512,i.d,i.d,[[2,i.c]]),i._15(131584,i.f,i.f,[i.x,i.X,i.q,i.l,i.i,i.d]),i._15(512,i.e,i.e,[i.f]),i._15(512,r.a,r.a,[[3,r.a]]),i._15(512,u.a,u.a,[]),i._15(512,ce.o,ce.o,[]),i._15(512,ce.e,ce.e,[]),i._15(512,ce.m,ce.m,[]),i._15(512,fe.a,fe.a,[]),i._15(512,g.a,g.a,[]),i._15(512,c.h,c.h,[]),i._15(512,s.e,s.e,[]),i._15(512,s.d,s.d,[]),i._15(512,y,y,[]),i._15(256,s.k,"XSRF-TOKEN",[]),i._15(256,s.l,"X-XSRF-TOKEN",[]),i._15(256,v.a,p,[]),i._15(256,z.a,"/",[]),i._15(256,oe.b,{name:"studentaccess",driverOrder:["indexeddb","websql","localstorage"]},[]),i._15(256,c.m,void 0,[]),i._15(256,c.l,void 0,[])])});Object(i.Q)(),Object(r.j)().bootstrapModuleFactory(Me)},34:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(3);var a=function(){var e={};return e[e.none=0]="none",e[e.error=1]="error",e[e.warn=2]="warn",e[e.info=3]="info",e[e.debug=4]="debug",e}(),o=function(){function e(){this.level=a.error}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<a.debug||console.debug.apply(console,["DEBUG [StudentAccess]"].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<a.info||console.info.apply(console,["%cINFO [StudentAccess]","color: blue"].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<a.warn||console.warn.apply(console,["WARN [StudentAccess]"].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<a.error||console.error.apply(console,["ERROR [StudentAccess]"].concat(e))},e}()},45:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(3),n(52),n(34);var a=function(){function e(e,t){this.storage=e,this.log=t,this.remember=!0,this.keys=[{key:"USER",valid:"MONTH"},{key:"HOMEWORK",query:"homework",valid:"DAY"},{key:"LOGIN",query:"login",valid:"DAY"},{key:"MISSING",query:"missing",valid:"DAY"},{key:"IMAGE",query:"myphoto",valid:"MONTH"},{key:"SCHEDULES",url:"./assets/schedules.json",valid:"MONTH"},{key:"TRANSACTIONS",query:"credit",queryParams:["history=10"],valid:"DAY"},{key:"MENU",query:"cafeteria",valid:"WEEK"},{key:"EVENTS",query:"events",valid:"WEEK"},{key:"STAFF",query:"staff",valid:"MONTH"},{key:"RECORDS",query:"records",valid:"MONTH"},{key:"TEACHERS",query:"allteachers",valid:"MONTH"},{key:"SCHEDULE",query:"schedule",valid:"MONTH"},{key:"ALLGRADES",query:"allgrades",valid:"DAY"}],this.USER=null,this.HOMEWORK=null,this.LOGIN=null,this.MISSING=null,this.IMAGE=null,this.SCHEDULES=null,this.TRANSACTIONS=null,this.MENU=null,this.EVENTS=null,this.STAFF=null,this.TEACHERS=null,this.SCHEDULE=null,this.ALLGRADES=null,this.log.info("new State()")}return e.prototype.get=function(e){return this.log.debug("State.get('"+e+"')",this[e]),this[e]},e.prototype.set=function(e,t){t&&(this.log.debug("State.set('"+e+"')",t),this[e]=t,this.save())},e.prototype.save=function(){var e=this;this.remember&&(this.log.debug("State.save()"),this.keys.forEach(function(t){var n=t.key,a=e[n];a&&e.storage.set(n,a)}))},e.prototype.load=function(){var e=this,t=this.keys.map(function(t){return e.storage.get(t.key)});return Promise.all(t).then(function(t){e.log.debug("State.load() ",t);var n=t.reduce(function(t,n,a){return t[e.keys[a].key]=n,t},{});return Object.assign(e,n),n}).catch(this.log.warn)},e.prototype.clear=function(){var e=this;this.keys.forEach(function(t){return e[t.key]=null})},e}()},60:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(3),n(82),n(34);var a=function(){function e(e,t,n){this.http=e,this.store=t,this.log=n}return e.prototype.login=function(e){return e.username&&e.password?this.http.get("https://db.nca.edu.ni/api/api_ewapp.php?mode=student&query=login&username="+e.username+"&password="+e.password+"&lang="+e.language).toPromise():Promise.reject(null)},e.prototype.getUser=function(){return Promise.resolve(this.currentUser||this.store.get("USER"))},e.prototype.logout=function(){var e=this;return this.store.clear().then(function(){return e.currentUser=null})},e}()},82:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(3),n(52);var a=n(249),o=n.n(a),l=(n(45),n(34),this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,l){function r(e){try{u(a.next(e))}catch(e){l(e)}}function i(e){try{u(a.throw(e))}catch(e){l(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,i)}u((a=a.apply(e,t||[])).next())})}),r=this&&this.__generator||function(e,t){function n(n){return function(r){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,o&&(l=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(l=l.call(o,n[1])).done)return l;switch(o=0,l&&(n=[0,l.value]),n[0]){case 0:case 1:l=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,o=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(6===n[0]||2===n[0])){i=0;continue}if(3===n[0]&&(!l||n[1]>l[0]&&n[1]<l[3])){i.label=n[1];break}if(6===n[0]&&i.label<l[1]){i.label=l[1],l=n;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(n);break}l[2]&&i.ops.pop(),i.trys.pop();continue}n=t.call(e,i)}catch(e){n=[6,e],o=0}finally{a=l=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,r])}}var a,o,l,r,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return r={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},i=function(){function e(e,t,n,a){this.http=e,this.storage=t,this.state=n,this.log=a,this.date=new Date,this.api="https://db.nca.edu.ni/api/api_ewapp.php",this.log.info("new Store()");var o=("0"+(this.date.getMonth()+1).toString()).slice(-2),l=("0"+this.date.getDate().toString()).slice(-2),r=this.date.getFullYear().toString();this.today=r+"-"+o+"-"+l,this.keys=this.state.keys}return e.prototype.fromApi=function(e,t,n){var a=this,o=this.buildUrl(e.url,e.query,e.queryParams);return this.http.get(o,{responseType:"text"}).toPromise().then(function(e){try{return JSON.parse(e)}catch(t){return e}}).then(function(o){var l=t?t({newData:o,oldData:n}):o;return a.state.set(e.key,{date:a.date,data:l}),l}).catch(function(e){return a.log.warn(e),n})},e.prototype.get=function(e,t,n){return void 0===n&&(n=!1),l(this,void 0,void 0,function(){var a,l,i;return r(this,function(r){try{if("USER"===e)return[2,this.getUser()];if(a=this.state.get(e),l=this.keys.find(function(t){return t.key===e}),!a)return[2,this.fromApi(l,t)];switch(i=void 0,l.valid){case"DAY":i=this.date.getDate()===new Date(a.date).getDate();break;case"WEEK":i=o()(this.date)===o()(new Date(a.date));break;case"MONTH":i=this.date.getMonth()===new Date(a.date).getMonth();break;default:throw Error("Store: Unknown Mode")}return i&&!n?[2,a.data]:[2,this.fromApi(l,t,a.data)]}catch(e){return this.log.warn(e),[2]}return[2]})})},e.prototype.buildUrl=function(e,t,n){if(void 0===n&&(n=[]),e)return e;var a=n.join("&"),o=(this.state.get("USER")||{data:{}}).data;return this.api+"?query="+t+"&lang="+o.language+"&username="+o.username+"&password="+o.password+"&mode=student&"+a},e.prototype.getUser=function(){return l(this,void 0,void 0,function(){var e,t,n;return r(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),e=void 0,(e=this.state.get("USER"))?[3,2]:[4,this.storage.get("STATE")];case 1:t=a.sent(),e=t.USER,this.log.debug("getUser: ",t),a.label=2;case 2:return e&&this.date.getMonth()===new Date(e.date).getMonth()?[2,e.data]:[2,null];case 3:return n=a.sent(),this.log.warn(n),[3,4];case 4:return[2]}})})},e.prototype.getLogin=function(){return l(this,void 0,void 0,function(){var e;return r(this,function(t){return(e=this.state.get("LOGIN"))&&this.date.getMonth()===new Date(e.date).getMonth()?[2,e.data]:[2,null]})})},e.prototype.persist=function(){this.state.save()},e.prototype.setUser=function(e){this.state.set("USER",{date:this.date,data:e})},e.prototype.clear=function(){var e=this;return this.storage.clear().then(function(){return e.log.debug("cleared storage"),e.state.clear()})},e}()}},[211]);