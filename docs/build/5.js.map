{"version":3,"sources":["../../src/pages/homework/homework.module.ts","../../src/components/animations.ts","../../src/pages/homework/homework.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { Homework } from './homework';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    Homework\n  ],\n  imports: [\n    IonicPageModule.forChild(Homework),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    Homework\n  ]\n})\nexport class HomeworkModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/homework/homework.module.ts","import {\n  trigger,\n  state,\n  style,\n  animate,\n  transition\n} from '@angular/animations';\n\nexport const expand = trigger('expand', [\n  state('true', style({\n    maxHeight: '10em',\n    opacity: '1',\n    padding: '',\n    border: '',\n    minHeight: '',\n    transition: 'all 250ms cubic-bezier(0.420, 0.000, 0.580, 1.000)'\n  })),\n  state('false', style({\n    maxHeight: '0',\n    opacity: '.7',\n    padding: '0',\n    border: 'none',\n    minHeight: '0',\n    transition: 'all 250ms cubic-bezier(0.420, 0.000, 0.580, 1.000)'\n  })),\n  transition('void => *', animate('0s')),\n  transition('* <=> *', animate('250ms ease-in-out'))\n]);\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/animations.ts","import { Component } from '@angular/core';\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  AlertController,\n  Loading,\n  LoadingController,\n  Refresher,\n} from 'ionic-angular';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { Store } from '../../providers/store';\nimport { Auth } from '../../providers/auth';\nimport { Log } from '../../providers/log';\n\nimport { expand } from '../../components/animations';\n\n@IonicPage()\n@Component({\n  selector: 'page-homework',\n  templateUrl: 'homework.html',\n  animations: [ expand ]\n})\nexport class Homework {\n  homework: Array<{calc_class: string, calc_date: string, lsn_date: string, lsn_hw: string, lsn_id: string}> = [];\n  classes: any[];\n  filteredHw: any[] = [];\n  selectedClass: string = 'all-classes';\n  hideChecked: boolean = true;\n  loading: Loading = this.loadingCtrl.create();\n\n  constructor(\n    private translate: TranslateService,\n    private alert: AlertController,\n    private loadingCtrl: LoadingController,\n\n    private store: Store,\n    private log: Log,\n  ){}\n\n  public async ionViewDidEnter(){\n    await this.loading.present();\n    this.getHomework();\n    this.loading.dismiss();\n  }\n  async getHomework( refresh = false ){\n    try {\n      let hw = await this.store.get(\n        'HOMEWORK',\n        ({ newData, oldData = { homework: [] } }) => ({\n          ...newData,\n          homework: newData.homework.map( item => {\n            if( oldData.homework.find( el => item.lsn_id === el.lsn_id && el.checked ) ){\n              item.checked = true;\n            }\n            return item;\n          } )\n        }),\n        refresh,\n      );\n      // this.homework serves as a backup\n      // this.filteredHw is presented in view\n      this.filteredHw = this.homework = hw.homework.slice(0).reverse();\n    } catch(err){\n      this.log.warn(err);\n    }\n  }\n\n  popover(e){\n    this.classes = this.homework\n      .filter( (el, i, arr) => arr.findIndex( t => t.calc_class === el.calc_class ) === i )\n      .map( el => ({\n        type: 'radio',\n        label: el.calc_class,\n        value: el.calc_class\n      }) );\n    this.classes.push({\n      type: 'radio',\n      label: this.translate.instant('HOMEWORK.ALL_CLASSES'),\n      value: 'all-classes'\n    });\n    this.alert.create({\n      title: this.translate.instant('HOMEWORK.TITLE'),\n      buttons: [\n        this.translate.instant('GLOBAL.CANCEL'),\n        {\n          text: this.translate.instant('GLOBAL.OK'),\n          handler: className => {\n            this.selectedClass = className;\n            if( className === 'all-classes' ){\n              this.filteredHw = this.homework;\n            } else {\n              this.filteredHw = this.homework.filter( hw => className === hw.calc_class );\n            }\n          }\n        }\n      ],\n      inputs: this.classes.map( button => ({\n        ...button,\n        checked: button.value === this.selectedClass\n      }) )\n    }).present();\n  }\n  public check( item ){\n    let index = this.homework.findIndex( el => el.lsn_id === item.lsn_id );\n    this.homework[index] = item;\n    this.store.persist();\n  }\n\n  async refreshHomework( refresher: Refresher ){\n    await this.getHomework(true);\n    refresher.complete();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/homework/homework.ts"],"sourceRoot":""}