{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { Login } from './login';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    Login\n  ],\n  imports: [\n    IonicPageModule.forChild(Login),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    Login\n  ]\n})\nexport class LoginModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport {\n  NavController,\n  NavParams,\n  AlertController,\n  LoadingController,\n  Loading,\n  IonicPage,\n  Events,\n  MenuController,\n} from 'ionic-angular';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { Auth } from '../../providers/auth';\nimport { Store } from '../../providers/store';\nimport { State } from '../../providers/state';\nimport { Log } from '../../providers/log';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class Login {\n  loading: Loading;\n  user = { username: '', password: '', language: 'en' };\n  remember: boolean = true;\n\n  constructor(\n    private events: Events,\n    private nav: NavController,\n    private navParams: NavParams,\n    private auth: Auth,\n    private store: Store,\n    private state: State,\n    private alert: AlertController,\n    private loadingCtrl: LoadingController,\n    private translate: TranslateService,\n    private log: Log,\n    private menuCtrl: MenuController,\n  ){\n    this.log.info('new Login()');\n  }\n\n  // disable sidemenu on login page\n  ionViewWillEnter(){\n    this.menuCtrl.swipeEnable(false);\n  }\n  // reenable sidemenu\n  ionViewWillLeave(){\n    this.menuCtrl.swipeEnable(true);\n  }\n\n  public login() {\n    this.showLoading();\n    this.auth.login(this.user).then(login => {\n      this.state.remember = this.remember;\n      if( login.login_status ){\n        this.store.setUser(this.user);\n        // this.nav.setRoot('Profile');\n        this.events.publish('login', this.user, login, 'Profile');\n      } else {\n        this.showError(this.translate.instant('LOGIN.FAIL'));\n        this.user.password = '';\n        this.user.username = '';\n      }\n    }).catch(err => {\n      if( err === null ){\n        this.showError(this.translate.instant('LOGIN.NO_CREDENTIALS'));\n      } else {\n        this.showError(err);\n      }\n    });\n  }\n\n  public selectLang( lang: string ){\n    this.translate.use(lang);\n  }\n\n  public showLoading() {\n    this.loading = this.loadingCtrl.create({\n      dismissOnPageChange: true\n    });\n    this.loading.present();\n  }\n\n  showError(text) {\n    this.loading.dismiss();\n\n    this.alert.create({\n      title: 'Error',\n      subTitle: text,\n      buttons: [\n        this.translate.instant('GLOBAL.OK')\n      ]\n    }).present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}