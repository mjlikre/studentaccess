{"version":3,"sources":["../../src/providers/store.ts","../../src/providers/auth.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.ts","../../src/providers/log.ts","../../src/providers/state.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport * as Storage from '@ionic/storage';\nimport { HttpClient } from '@angular/common/http';\nimport 'rxjs/add/operator/toPromise';\nimport 'rxjs/add/operator/do';\n\nimport currentWeekNumber from 'current-week-number';\n\nimport { State } from './state';\nimport { Log } from './log';\n\n@Injectable()\nexport class Store {\n  private date: Date = new Date();\n  public today: string;\n  private api: string = 'https://db.nca.edu.ni/api/api_ewapp.php'\n  private keys: IKey[];\n\n  constructor(\n    private http: HttpClient,\n    private storage: Storage.Storage,\n    private state: State,\n    private log: Log,\n  ){\n    this.log.info('new Store()');\n    let month = ('0' + ( this.date.getMonth() + 1 ).toString() ).slice(-2);\n    let day = ('0' + this.date.getDate().toString() ).slice(-2);\n    let year = this.date.getFullYear().toString();\n    this.today = `${year}-${month}-${day}`;\n    this.keys = this.state.keys;\n  }\n  private fromApi( el: IKey, modifier: Function, oldData?: any ): Promise<any> {\n    let url = this.buildUrl( el.url, el.query, el.queryParams );\n    return this.http.get(url, { responseType: 'text' })\n      .do(res => this.log.warn('res: ',res))\n      .toPromise()\n      .then( text => {\n        try {\n          let json: object = JSON.parse(text);\n          return json;\n        } catch(e) {\n          return text;\n        }\n      })\n      .then( newData => {\n        let modifiedData = !modifier ? newData : modifier({\n          newData,\n          oldData\n        });\n        this.state.set(el.key, {\n          date: this.date,\n          data: modifiedData\n        });\n        return modifiedData;\n      })\n      .catch( err => {\n        this.log.warn(err);\n        return oldData;\n      });\n  }\n\n  public async get( key: string, modifier?: Function ): Promise<any> {\n    try {\n      if( key === 'USER' ){ return this.getUser(); }\n\n      // from the state\n      let storeItem = this.state.get(key);\n\n      let keyItem = this.keys.find( el => el.key === key );\n\n      // not in memory, not in storage, from api\n      if( !storeItem ){\n        return this.fromApi( keyItem, modifier );\n      }\n\n      let comparator: boolean;\n      switch( keyItem.valid ){\n        case 'DAY':\n          comparator = this.date.getDate() === new Date(storeItem.date).getDate();\n          break;\n        case 'WEEK':\n          comparator = currentWeekNumber(this.date) === currentWeekNumber( new Date(storeItem.date) );\n          break;\n        case 'MONTH':\n          comparator = this.date.getMonth() === new Date(storeItem.date).getMonth();\n          break;\n        default:\n          throw Error('Store: Unknown Mode');\n      }\n      //check validity\n      if( comparator ){\n        return storeItem.data;\n      } else {\n        return this.fromApi( keyItem, modifier, storeItem.data );\n      }\n    } catch(e){\n      this.log.warn(e);\n      return;\n    }\n  }\n\n  private buildUrl( url: string, query: string, queryParams: string[] = [] ): string {\n    if( url ){ return url; }\n\n    let extraParams = queryParams.join('&');\n\n    let user = (this.state.get('USER') || { data: {} } as StoredItem<StoredUser>).data as StoredUser;\n    return `${this.api}?query=${query}&lang=${user.language}&username=${user.username}&password=${user.password}&mode=student&${ extraParams }`;\n  }\n\n  private async getUser(){\n    try {\n      let user;\n      user = this.state.get('USER');\n      if( !user ){\n        let state = await this.storage.get('STATE');\n        user = state.USER;\n        this.log.debug('getUser: ',state)\n      }\n      if( user && this.date.getMonth() === new Date(user.date).getMonth() ){\n        return user.data;\n      } else {\n        return null;\n      }\n    } catch(e){\n      this.log.warn(e);\n    }\n  }\n  public async getLogin(){\n    let login = this.state.get('LOGIN');\n    if( login && this.date.getMonth() === new Date(login.date).getMonth() ){\n      return login.data;\n    } else {\n      return null;\n    }\n  }\n  public persist(){\n    this.state.save();\n  }\n  public setUser(user){\n    this.state.set('USER', {\n      date: this.date,\n      data: user\n    });\n  }\n  public clear(): Promise<void> {\n    return this.storage.clear().then( () => {\n      this.log.debug('cleared storage')\n      return this.state.clear();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/store.ts","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport 'rxjs/add/operator/toPromise';\nimport 'rxjs/add/operator/do';\n\nimport { Store } from './store';\nimport { Log } from './log';\n\nexport class User {\n  constructor(\n    public username: string,\n    public password: string,\n    public language: string = 'en'\n  ){}\n}\n\n@Injectable()\nexport class Auth {\n  currentUser: User;\n\n  constructor(\n    private http: HttpClient,\n    private store: Store,\n    private log: Log,\n  ){}\n\n  public login(credentials): Promise<any> {\n    if( !credentials.username || !credentials.password ){\n      return Promise.reject(null);\n    }\n    return this.http.get(`https://db.nca.edu.ni/api/api_ewapp.php?mode=student&query=login&username=${credentials.username}&password=${credentials.password}&lang=${credentials.language}`)\n      .do(res => this.log.warn(res))\n      .toPromise();\n  }\n\n  public getUser(): Promise<User> {\n    return Promise.resolve(this.currentUser || this.store.get('USER') );\n  }\n\n  public logout(): Promise<null> {\n    return this.store.clear()\n      .then( () => this.currentUser = null );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 123;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 123\n// module chunks = 9","var map = {\n\t\"../pages/cafeteria/cafeteria.module\": [\n\t\t293,\n\t\t0\n\t],\n\t\"../pages/events/events.module\": [\n\t\t294,\n\t\t8\n\t],\n\t\"../pages/grades-detail/grades-detail.module\": [\n\t\t296,\n\t\t2\n\t],\n\t\"../pages/grades/grades.module\": [\n\t\t295,\n\t\t1\n\t],\n\t\"../pages/homework/homework.module\": [\n\t\t297,\n\t\t5\n\t],\n\t\"../pages/login/login.module\": [\n\t\t298,\n\t\t7\n\t],\n\t\"../pages/profile/profile.module\": [\n\t\t299,\n\t\t4\n\t],\n\t\"../pages/records/records.module\": [\n\t\t300,\n\t\t6\n\t],\n\t\"../pages/staff/staff.module\": [\n\t\t301,\n\t\t3\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 164;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 164\n// module chunks = 9","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { AppModule } from './app.module';\nimport { enableProdMode } from '@angular/core';\n\nenableProdMode();\n// renamed to AppModule to solve prod env bug ¯\\_(ツ)_/¯\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NoopAnimationsModule } from '@angular/platform-browser/animations';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { HttpClientModule, HttpClient } from '@angular/common/http';\n\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\n\nimport { IonicStorageModule } from '@ionic/storage';\n\nimport { StudentAccess } from './app';\n\nimport { Store } from '../providers/store';\nimport { Auth } from '../providers/auth';\nimport { State } from '../providers/state';\nimport { Log } from '../providers/log';\n\nexport function createTranslateLoader(http: HttpClient) {\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\n}\n\n@NgModule({\n  declarations: [\n    StudentAccess\n  ],\n  imports: [\n    HttpClientModule,\n    BrowserModule,\n    NoopAnimationsModule,\n    IonicModule.forRoot(StudentAccess, {}, \n{\n  links: [\n    { loadChildren: '../pages/cafeteria/cafeteria.module#CafeteriaModule', name: 'Cafeteria', segment: 'cafeteria', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/events/events.module#EventsModule', name: 'Events', segment: 'events', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/grades/grades.module#GradesModule', name: 'Grades', segment: 'grades', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/grades-detail/grades-detail.module#GradesDetailModule', name: 'GradesDetail', segment: 'grades', priority: 'low', defaultHistory: ['Grades'] },\n    { loadChildren: '../pages/homework/homework.module#HomeworkModule', name: 'Homework', segment: 'homework', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/login/login.module#LoginModule', name: 'Login', segment: 'login', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/profile/profile.module#ProfileModule', name: 'Profile', segment: 'profile', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/records/records.module#RecordsModule', name: 'Records', segment: 'profile', priority: 'low', defaultHistory: ['Profile'] },\n    { loadChildren: '../pages/staff/staff.module#StaffModule', name: 'Staff', segment: 'staff', priority: 'low', defaultHistory: [] }\n  ]\n}),\n    IonicStorageModule.forRoot({\n      name: 'studentaccess',\n      driverOrder: ['indexeddb','websql','localstorage']\n    }),\n    TranslateModule.forRoot({\n    loader: {\n      provide: TranslateLoader,\n      useFactory: createTranslateLoader,\n      deps: [ HttpClient ]\n    }\n  })\n  ],\n  bootstrap: [ IonicApp ],\n  entryComponents: [ StudentAccess ],\n  providers: [\n    Store,\n    Auth,\n    State,\n    HttpClientModule,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    Log,\n  ]\n})\n// renamed to AppModule to solve prod env bug ¯\\_(ツ)_/¯\nexport class AppModule {};\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { Nav, LoadingController, Events, Loading } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { Auth } from '../providers/auth';\nimport { State } from '../providers/state';\nimport { Log } from '../providers/log';\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class StudentAccess {\n  @ViewChild(Nav) nav: Nav;\n  public loading: Loading;\n  public rootPage: string = 'Profile';\n  public username: string = '';\n  public name: string = '';\n\n  public pages: Array<any>;\n  public activePage: string;\n\n  constructor(\n    public loadingCtrl: LoadingController,\n    public events: Events,\n    public storage: Storage,\n\n    public auth: Auth,\n    public state: State,\n    public log: Log,\n    public translate: TranslateService\n  ){\n    this.loading = this.loadingCtrl.create({\n      dismissOnPageChange: true\n    });\n    this.loading.present();\n\n    // load translations in background\n    translate.getTranslation('en');\n    translate.getTranslation('es');\n    translate.getTranslation('ko');\n    let preferedLang = navigator.language.slice(0,2);\n    if( preferedLang !== 'en' && preferedLang !== 'es' ){\n      preferedLang = 'en';\n    }\n    translate.setDefaultLang(preferedLang);\n    this.events.subscribe('login', ( user, login, link ) => this.login(user, login, link) );\n\n    this.storage.ready()\n      .then( () => this.state.load() )\n      .then( fromStorage => {\n        this.loading.dismiss();\n        let state  = fromStorage as any;\n        if( state && state.USER && state.LOGIN ){\n          this.login(state.USER.data, state.LOGIN.data);\n        } else {\n          this.logout();\n        }\n      })\n      .catch(this.log.warn);\n\n    this.pages = [\n      { title: 'PROFILE.NAME', component: 'Profile', icon: 'person' },\n      { title: 'HOMEWORK.NAME', component: 'Homework', icon: 'bookmarks' },\n      { title: 'GRADES.NAME', component: 'Grades', icon: 'checkmark-circle' },\n      { title: 'EVENTS.NAME', component: 'Events', icon: 'calendar' },\n      { title: 'CAFETERIA.NAME', component: 'Cafeteria', icon: 'card' },\n      { title: 'STAFF.NAME', component: 'Staff', icon: 'people' }\n    ];\n  }\n  login( user, login, link? ){\n    this.username = user.username;\n    this.name = login.person_name;\n    this.translate.use(user.language);\n    if( link ){\n      this.openPage(link);\n    } else {\n      let hash = location.hash.slice(2);\n      this.activePage = hash.charAt(0).toUpperCase() + hash.slice(1);\n    }\n  }\n  openPage( page ){\n    this.activePage = page;\n    this.nav.setRoot(page);\n    this.log.debug('openPage: ', page, 'active Page: ', (this.nav.getActive() || {} as any).name );\n  }\n  logout(){\n    this.loading = this.loadingCtrl.create();\n    this.loading.present()\n      .then( () => this.nav.setRoot('Login') )\n      .then( () => this.auth.logout() )\n      .then( () => this.loading.dismiss() )\n      .catch(this.log.warn);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.ts","import { Injectable } from '@angular/core';\n\nenum levels {\n  none = 0,\n  error = 1,\n  warn = 2,\n  info = 3,\n  debug = 4\n};\n\n@Injectable()\nexport class Log {\n  public level: number = levels.debug;\n  debug(...rest){\n    if( this.level < levels.debug){ return; }\n    console.debug(`DEBUG [StudentAccess]`, ...rest);\n  }\n  info(...rest){\n    if( this.level < levels.info){ return; }\n    console.info(`%cINFO [StudentAccess]`, 'color: blue', ...rest);\n  }\n  warn(...rest){\n    if( this.level < levels.warn){ return; }\n    console.warn(`WARN [StudentAccess]`, ...rest);\n  }\n  error(...rest){\n    if( this.level < levels.error){ return; }\n    console.error(`ERROR [StudentAccess]`, ...rest);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/log.ts","import { Storage } from '@ionic/storage';\nimport { Injectable } from '@angular/core';\n\nimport { Log } from './log';\n\n@Injectable()\nexport class State {\n  public remember: boolean = true;\n  public keys: IKey[] = [\n    {\n      key: 'USER',\n      valid: 'MONTH'\n    }, {\n      key: 'HOMEWORK',\n      query: 'homework',\n      valid: 'DAY'\n    }, {\n      key: 'LOGIN',\n      query: 'login',\n      valid: 'DAY'\n    }, {\n      key: 'MISSING',\n      query: 'missing',\n      valid: 'DAY'\n    }, {\n      key: 'IMAGE',\n      query: 'myphoto',\n      valid: 'MONTH'\n    }, {\n      key: 'SCHEDULES',\n      url: './assets/schedules.json',\n      valid: 'MONTH'\n    }, {\n      key: 'TRANSACTIONS',\n      query: 'credit',\n      queryParams: ['history=10'],\n      valid: 'MONTH'\n    }, {\n      key: 'MENU',\n      query: 'cafeteria',\n      valid: 'WEEK'\n    }, {\n      key: 'EVENTS',\n      query: 'events',\n      valid: 'WEEK'\n    }, {\n      key: 'STAFF',\n      query: 'staff',\n      valid: 'MONTH'\n    }, {\n      key: 'RECORDS',\n      query: 'records',\n      valid: 'MONTH' // ?\n    }, {\n      key: 'TEACHERS',\n      query: 'allteachers',\n      valid: 'MONTH'\n    }, {\n      key: 'SCHEDULE',\n      query: 'schedule',\n      valid: 'MONTH'\n    }, {\n      key: 'ALLGRADES',\n      query: 'allgrades',\n      valid: 'DAY'\n    }\n  ];\n\n  private USER: StoredItem<StoredUser> = null;\n  private HOMEWORK: StoredItem<any> = null;\n  private LOGIN: StoredItem<any> = null;\n  private MISSING: StoredItem<any> = null;\n  private IMAGE: StoredItem<string> = null;\n  private SCHEDULES: StoredItem<any[]> = null;\n  private TRANSACTIONS: StoredItem<any> = null;\n  private MENU: StoredItem<any> = null;\n  private EVENTS: StoredItem<any> = null;\n  private STAFF: StoredItem<any> = null;\n  private TEACHERS: StoredItem<any> = null;\n  private SCHEDULE: StoredItem<any> = null;\n  private ALLGRADES: StoredItem<any> = null;\n\n  constructor(\n    private storage: Storage,\n    private log: Log,\n  ){\n    this.log.info('new State()')\n  }\n\n  public get(key: string): StoredItem<any> {\n    this.log.debug(`State.get('${key}')`, this[key])\n    return this[key];\n  }\n  public set(key: string, value: StoredItem<any>): void {\n    // ignore null and undefined\n    if( !value ){ return; }\n\n    this.log.debug(`State.set('${key}')`, value)\n    this[key] = value;\n    this.save();\n  }\n  public save(): void {\n    if( !this.remember ){ return; }\n\n    this.log.debug('State.save()')\n    this.keys.forEach( ({ key }) => {\n      let value = this[key];\n      if( value ){\n        this.storage.set(key, value);\n      }\n    });\n  }\n  public load(): Promise<any> {\n    let proms = this.keys.map( ({ key }) => this.storage.get(key));\n\n    return Promise.all(proms).then( state => {\n      this.log.debug('State.load() ', state);\n      let reduced = state.reduce( (accumulator, el, i) => {\n        accumulator[ this.keys[i].key ] = el;\n        return accumulator;\n      }, {});\n      // load state into memory\n      Object.assign(this, reduced);\n      return reduced;\n    }).catch(this.log.warn);\n  }\n  public clear(){\n    this.keys.forEach( key => this[key.key] = null );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/state.ts"],"sourceRoot":""}